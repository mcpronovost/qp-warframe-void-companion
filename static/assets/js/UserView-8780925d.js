import{d as Q,u as X,s as Y,a as Z,r as i,o as ee,b as te,c as a,w as o,A as se,E,f as p,v as ne,g as e,h as r,i as u,j as s,t as v,k as le,F as D,l as M,T as oe,m,n as ae,p as re,q as h,_ as ie}from"./index-36b0170d.js";import{i as ue,a as ce,b as de,c as pe}from"./relic_axi-05cc5723.js";import{i as _e}from"./blueprint-b6c1ffa1.js";import{i as ve,a as me,b as ge}from"./systems-8cdc0256.js";const fe={key:0,class:"qp-container"},he={class:"qp-relics-actions-era"},we=["textContent"],ke=["textContent"],qe=["textContent"],ye=["textContent"],Ce=["textContent"],$e=["onClick"],be={class:"qp-relics-item-wrapper"},xe={class:"qp-relics-image"},Re={class:"qp-relics-name"},ze=["textContent"],Le={key:0,class:"qp-relics-components-count"},Ue=["textContent"],Ne={class:"qp-relics-rarities"},Ve={key:0,class:"qp-relics-rarities-gold"},Ae={key:1,class:"qp-relics-rarities-silver"},Ee={key:2,class:"qp-relics-rarities-bronze"},De=["textContent"],Me={key:0,class:"qp-relics-drawer-components-list"},Be={class:"qp-relics-drawer-components-item-wrapper"},Te={class:"qp-relics-drawer-components-img"},We={class:"qp-relics-drawer-components-name"},Ie=["textContent"],Oe={class:"qp-relics-drawer-rarities"},Se={key:0,class:"qp-relics-drawer-rarities-gold"},je={key:1,class:"qp-relics-drawer-rarities-silver"},Fe={key:2,class:"qp-relics-drawer-rarities-bronze"},Ge=Q({__name:"UserView",setup(Pe){const{t:B}=X(),T=ne(),W=Y();Z(W);const q=i(!1),_=i(!1),C=i(null),y=i(!1),w=i(null),b=i(""),I=i([]),x=i([]),R=i(0),z=i(1),L=i(1),U=i(window.innerWidth),k=async(c,n,$=!1)=>{$?_.value=!0:q.value=!0,C.value=null;let g=c?`?page=${c}`:"?page=1";g+=n?`&era=${n}`:"";try{let f=await fetch(`${se}/users/${T.params.slug}/relics/${g}`,{method:"GET"}).then(l=>l).catch(()=>new Response(null,{status:400}));if(f.status===200){let l=await f.json();b.value=l.user,R.value=l.count,z.value=l.size,I.value=l.results,x.value=l.results,q.value=!1,_.value=!1}else throw f.status}catch(f){f===401?E.error("not authorized"):E.error(B("AnErrorOccurred")),C.value=`${f}`,q.value=!1,_.value=!1}},O=(c=null)=>{w.value=c,y.value=!0},S=()=>{y.value=!1,w.value=null},N=()=>{U.value=window.innerWidth};return ee(()=>{k(null,null),window.addEventListener("resize",N)}),te(()=>{window.removeEventListener("resize",N)}),(c,n)=>{const $=p("qp-header"),g=p("el-button"),f=p("el-button-group"),l=p("el-image"),V=p("el-col"),j=p("el-pagination"),F=p("el-row"),G=p("el-drawer"),P=p("qp-notfound"),H=p("qp-loading"),J=p("qp-page"),K=ae("loading");return e(),a(J,null,{default:o(()=>[!q.value&&!C.value?(e(),r("div",fe,[u($,{title:c.$t("RelicsOf",[b.value]),"page-type":"relics"},null,8,["title"]),s("div",he,[u(f,null,{default:o(()=>[u(g,{disabled:_.value,onClick:n[0]||(n[0]=t=>k(null,null,!0))},{default:o(()=>[s("span",{textContent:v(c.$t("All"))},null,8,we)]),_:1},8,["disabled"]),u(g,{disabled:_.value,onClick:n[1]||(n[1]=t=>k(null,"Lith",!0))},{default:o(()=>[s("span",{textContent:v(c.$t("Lith"))},null,8,ke)]),_:1},8,["disabled"]),u(g,{disabled:_.value,onClick:n[2]||(n[2]=t=>k(null,"Meso",!0))},{default:o(()=>[s("span",{textContent:v(c.$t("Meso"))},null,8,qe)]),_:1},8,["disabled"]),u(g,{disabled:_.value,onClick:n[3]||(n[3]=t=>k(null,"Neo",!0))},{default:o(()=>[s("span",{textContent:v(c.$t("Neo"))},null,8,ye)]),_:1},8,["disabled"]),u(g,{disabled:_.value,onClick:n[4]||(n[4]=t=>k(null,"Axi",!0))},{default:o(()=>[s("span",{textContent:v(c.$t("Axi"))},null,8,Ce)]),_:1},8,["disabled"])]),_:1})]),le((e(),a(F,{class:"qp-relics-list"},{default:o(()=>[u(oe,{name:"list",mode:"out-in"},{default:o(()=>[(e(!0),r(D,null,M(x.value,(t,d)=>(e(),a(V,{key:`relics-${d}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:o(()=>[s("div",{class:"qp-relics-item",onClick:A=>O(t)},[s("div",be,[s("div",xe,[u(re,null,{default:o(()=>[t.era=="Lith"?(e(),a(l,{key:0,src:h(ue)},null,8,["src"])):t.era=="Meso"?(e(),a(l,{key:1,src:h(ce)},null,8,["src"])):t.era=="Neo"?(e(),a(l,{key:2,src:h(de)},null,8,["src"])):t.era=="Axi"?(e(),a(l,{key:3,src:h(pe)},null,8,["src"])):m("",!0)]),_:2},1024)]),s("div",Re,[s("span",{textContent:v(`${t.era} ${t.name}`)},null,8,ze)]),t.components.length>1?(e(),r("div",Le,[s("span",{textContent:v(`x${t.components.length}`)},null,8,Ue)])):m("",!0),s("div",Ne,[t.rarities.gold?(e(),r("span",Ve)):m("",!0),t.rarities.silver?(e(),r("span",Ae)):m("",!0),t.rarities.bronze?(e(),r("span",Ee)):m("",!0)])])],8,$e)]),_:2},1024))),128))]),_:1}),u(V,null,{default:o(()=>[u(j,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":L.value,"onUpdate:current-page":n[5]||(n[5]=t=>L.value=t),"page-size":z.value,total:R.value,onCurrentChange:k},null,8,["current-page","page-size","total"])]),_:1})]),_:1})),[[K,_.value]]),u(G,{modelValue:y.value,"onUpdate:modelValue":n[6]||(n[6]=t=>y.value=t),direction:"rtl",size:U.value<992?"90%":"30%","before-close":S},{header:o(()=>[w.value?(e(),r("span",{key:0,class:"el-drawer__title",textContent:v(`${w.value.era} ${w.value.name}`)},null,8,De)):m("",!0)]),default:o(()=>{var t;return[s("div",null,[(t=w.value)!=null&&t.components?(e(),r("ul",Me,[(e(!0),r(D,null,M(w.value.components,(d,A)=>(e(),r("li",{key:`warframe-components-${A}`,class:"qp-relics-drawer-components-item"},[s("div",Be,[s("div",Te,[d.component=="blueprint"?(e(),a(l,{key:0,src:h(_e)},null,8,["src"])):d.component=="chassis"?(e(),a(l,{key:1,src:h(ve)},null,8,["src"])):d.component=="neuroptics"?(e(),a(l,{key:2,src:h(me)},null,8,["src"])):d.component=="systems"?(e(),a(l,{key:3,src:h(ge)},null,8,["src"])):m("",!0)]),s("div",null,[s("div",We,[s("span",{textContent:v(d.name)},null,8,Ie)]),s("div",Oe,[d.percent<10?(e(),r("span",Se)):d.percent>9&&d.percent<20?(e(),r("span",je)):d.percent>19?(e(),r("span",Fe)):m("",!0)])])])]))),128))])):m("",!0)])]}),_:1},8,["modelValue","size"])])):q.value?(e(),a(H,{key:2})):(e(),a(P,{key:1}))]),_:1})}}});const Xe=ie(Ge,[["__scopeId","data-v-471f7548"]]);export{Xe as default};
