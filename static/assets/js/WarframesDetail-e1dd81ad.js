import{d as P,u as G,s as J,a as K,r as g,o as Q,g as e,h as a,i as k,w as h,j as n,c as d,t as f,n as X,F as C,k as q,M as Y,A as R,H as W,E as v,N as L,f as m,m as Z,x as ee,e as te,v as se,q as b,l as ae,_ as ne}from"./index-0f729360.js";import{i as oe}from"./blueprint-b6c1ffa1.js";import{i as re,a as le,b as ie}from"./systems-8cdc0256.js";const ce={key:0,class:"qp-container"},ue={class:"qp-warframes-actions"},de={class:"qp-warframes-actions-extra"},me=["textContent"],pe=["textContent"],_e={class:"qp-warframes-detail-components-list"},fe=["onClick"],he={class:"qp-warframes-detail-components-item-wrapper"},ve={class:"qp-warframes-detail-components-img"},we={class:"qp-warframe-detail-components-name"},ye=["textContent"],ge={class:"qp-warframe-detail-components-relics"},ke={key:0},Ce={key:1,class:"qp-warframe-detail-components-era"},qe=["textContent"],$e={key:0},xe={key:1,class:"qp-warframe-detail-components-era"},Ee=["textContent"],be={key:0},De={key:1,class:"qp-warframe-detail-components-era"},Ae=["textContent"],Se={key:0},Ne={key:1,class:"qp-warframe-detail-components-era"},Re=["textContent"],We={class:"qp-warframes-detail-image"},Oe=P({__name:"WarframesDetail",setup(Ue){const{t:p}=G(),z=ee(),F=te(),M=J(),{rat:D,lang:A,id:Be}=K(M),w=g(!1),_=g(!1),S=g(null),$=g(null),c=g(),N=async(l=!1)=>{l||(w.value=!0),S.value=null;try{let t=await fetch(`${R}/warframes/${z.params.pk}/`,{method:"GET",headers:W(D.value,A.value)}).then(o=>o).catch(()=>new Response(null,{status:400}));if(t.status===200){let o=await t.json();c.value=o,w.value=!1}else throw t.status}catch(t){t===401?v.error("not authorized"):v.error(p("AnErrorOccurred")),S.value=`${t}`,w.value=!1}},O=async(l,t=!1)=>{_.value=!0,$.value=null;let o=new FormData;c.value&&t?o.append("id",c.value.components.map(s=>s.id.toString()).join(",")):o.append("id",l.toString());try{let s=await fetch(`${R}/me/warframes/components/create/`,{method:"POST",body:o,headers:W(D.value,A.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(s.status===201)L({message:p(t?"ComponentsUpdated":"ComponentUpdated"),type:"success",position:"bottom-right",showClose:!0}),_.value=!1,t?F.push({name:"Warframes"}):N(!0);else throw s.status}catch(s){s===401?v.error("not authorized"):v.error(p("AnErrorOccurred")),$.value=`${s}`,_.value=!1}},U=async(l,t=!1)=>{_.value=!0,$.value=null;let o=new FormData;c.value&&t&&o.append("ids",c.value.components.map(s=>s.id.toString()).join(","));try{let s=await fetch(`${R}/me/warframes/components/${l}/delete/`,{method:"DELETE",body:o,headers:W(D.value,A.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(s.status===204)L({message:p(t?"ComponentsUpdated":"ComponentUpdated"),type:"success",position:"bottom-right",showClose:!0}),_.value=!1,N(!0);else throw s.status}catch(s){s===401?v.error("not authorized"):v.error(p("AnErrorOccurred")),$.value=`${s}`,_.value=!1}},x=(l,t)=>{let o=l.filter(s=>s.era==t);return o!=null&&o.length?o:[]};return Q(()=>{N()}),(l,t)=>{const o=m("qp-header"),s=m("el-button"),y=m("el-button-group"),E=m("el-image"),B=m("el-col"),j=m("el-row"),T=m("qp-notfound"),I=m("qp-loading"),V=Z("loading");return!w.value&&!S.value&&c.value?(e(),a("div",ce,[k(o,{title:c.value.name,"page-type":"warframe"},null,8,["title"]),k(j,{class:"qp-warframes-detail"},{default:h(()=>[k(B,{span:24,md:14,class:"qp-warframes-detail-info"},{default:h(()=>[n("div",ue,[n("div",de,[k(y,null,{default:h(()=>[c.value.completion<100?(e(),d(s,{key:0,onClick:t[0]||(t[0]=r=>O(0,!0))},{default:h(()=>[n("span",{textContent:f(l.$t("CompleteAll"))},null,8,me)]),_:1})):(e(),d(s,{key:1,onClick:t[1]||(t[1]=r=>U(0,!0))},{default:h(()=>[n("span",{textContent:f(l.$t("RemoveAll"))},null,8,pe)]),_:1}))]),_:1})])]),X((e(),a("ul",_e,[(e(!0),a(C,null,q(c.value.components,(r,H)=>(e(),a("li",{key:`warframe-components-${H}`,class:se(`qp-warframes-detail-components-item${r.is_owned?" qp-isowned":""}`),onClick:u=>r.is_owned?U(r.id):O(r.id)},[n("div",he,[n("div",ve,[r.name=="blueprint"?(e(),d(E,{key:0,src:b(oe)},null,8,["src"])):r.name=="chassis"?(e(),d(E,{key:1,src:b(re)},null,8,["src"])):r.name=="neuroptics"?(e(),d(E,{key:2,src:b(le)},null,8,["src"])):r.name=="systems"?(e(),d(E,{key:3,src:b(ie)},null,8,["src"])):ae("",!0)]),n("div",null,[n("div",we,[n("span",{textContent:f(l.$t(r.name))},null,8,ye)]),n("div",ge,[n("div",null,[(e(!0),a(C,null,q(x(r.relics,"Lith"),(u,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",ke,", ")):(e(),a("span",Ce,"Lith : ")),n("span",{textContent:f(u.name)},null,8,qe)]))),128))]),n("div",null,[(e(!0),a(C,null,q(x(r.relics,"Meso"),(u,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",$e,", ")):(e(),a("span",xe,"Meso : ")),n("span",{textContent:f(u.name)},null,8,Ee)]))),128))]),n("div",null,[(e(!0),a(C,null,q(x(r.relics,"Neo"),(u,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",be,", ")):(e(),a("span",De,"Neo : ")),n("span",{textContent:f(u.name)},null,8,Ae)]))),128))]),n("div",null,[(e(!0),a(C,null,q(x(r.relics,"Axi"),(u,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",Se,", ")):(e(),a("span",Ne,"Axi : ")),n("span",{textContent:f(u.name)},null,8,Re)]))),128))])])])])],10,fe))),128))])),[[V,_.value]])]),_:1}),k(B,{span:24,md:10,class:"qp-warframes-detail-picture"},{default:h(()=>[n("div",We,[n("div",{class:"qp-warframes-detail-img",style:Y(`background-image:url('https://raw.githubusercontent.com/WFCD/warframe-items/master/data/img/${c.value.image_name}')`)},null,4)])]),_:1})]),_:1})])):w.value?(e(),d(I,{key:2})):(e(),d(T,{key:1}))}}});const Me=ne(Oe,[["__scopeId","data-v-07c6a21c"]]);export{Me as default};
