import{d as I,u as H,s as P,a as V,r as g,o as G,g as e,h as n,i as v,w as h,j as s,c as x,t as _,k as J,F as k,l as C,M as K,A,H as R,E as p,f as m,n as Q,x as X,e as Y,v as Z,_ as ee}from"./index-708ca2a2.js";import{_ as te}from"./WeaponImage.vue_vue_type_script_setup_true_lang-c08271b8.js";import"./blueprint-b6c1ffa1.js";import"./prime_upperlimb-e05cfcd9.js";const ne={key:0,class:"qp-container"},se={class:"qp-weapons-actions"},oe={class:"qp-weapons-actions-extra"},ae=["textContent"],le=["textContent"],re={class:"qp-weapons-detail-components-list"},ie=["onClick"],ce={class:"qp-weapons-detail-components-item-wrapper"},ue={class:"qp-weapons-detail-components-img"},pe={class:"qp-weapons-detail-components-name"},de=["textContent"],_e={class:"qp-weapons-detail-components-relics"},me={key:0},ve={key:1,class:"qp-weapons-detail-components-era"},he=["textContent"],fe={key:0},we={key:1,class:"qp-weapons-detail-components-era"},ye=["textContent"],ge={key:0},ke={key:1,class:"qp-weapons-detail-components-era"},Ce=["textContent"],qe={key:0},$e={key:1,class:"qp-weapons-detail-components-era"},xe=["textContent"],Ee={class:"qp-weapons-detail-image"},be=I({__name:"SecondaryWeaponsDetail",setup(De){const{t:f}=H(),z=X(),B=Y(),F=P(),{rat:E,lang:b}=V(F),w=g(!1),d=g(!1),D=g(null),q=g(null),c=g(),S=async(r=!1)=>{r||(w.value=!0),D.value=null;try{let o=await fetch(`${A}/secondary-weapons/${z.params.pk}/`,{method:"GET",headers:R(E.value,b.value)}).then(a=>a).catch(()=>new Response(null,{status:400}));if(o.status===200){let a=await o.json();c.value=a,w.value=!1}else throw o.status}catch(o){o===401?p.error("not authorized"):p.error(f("AnErrorOccurred")),D.value=`${o}`,w.value=!1}},W=async(r,o=!1)=>{d.value=!0,q.value=null;let a=new FormData;c.value&&o?a.append("id",c.value.components.map(t=>t.id.toString()).join(",")):a.append("id",r.toString());try{let t=await fetch(`${A}/me/secondary-weapons/components/create/`,{method:"POST",body:a,headers:R(E.value,b.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(t.status===201)p.success(f("ComponentsUpdated")),d.value=!1,o?B.push({name:"SecondaryWeapons"}):S(!0);else throw t.status}catch(t){t===401?p.error("not authorized"):p.error(f("AnErrorOccurred")),q.value=`${t}`,d.value=!1}},O=async(r,o=!1)=>{d.value=!0,q.value=null;let a=new FormData;c.value&&o&&a.append("ids",c.value.components.map(t=>t.id.toString()).join(","));try{let t=await fetch(`${A}/me/secondary-weapons/components/${r}/delete/`,{method:"DELETE",body:a,headers:R(E.value,b.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(t.status===204)p.success(f("ComponentUpdated")),d.value=!1,S(!0);else throw t.status}catch(t){t===401?p.error("not authorized"):p.error(f("AnErrorOccurred")),q.value=`${t}`,d.value=!1}},$=(r,o)=>{let a=r.filter(t=>t.era==o);return a!=null&&a.length?a:[]};return G(()=>{S()}),(r,o)=>{const a=m("qp-header"),t=m("el-button"),y=m("el-button-group"),L=m("el-col"),M=m("el-row"),U=m("qp-notfound"),j=m("qp-loading"),N=Q("loading");return!w.value&&!D.value&&c.value?(e(),n("div",ne,[v(a,{title:c.value.name,"page-type":"weapon"},null,8,["title"]),v(M,{class:"qp-weapons-detail"},{default:h(()=>[v(L,{span:24,md:14,class:"qp-weapons-detail-info"},{default:h(()=>[s("div",se,[s("div",oe,[v(y,null,{default:h(()=>[c.value.completion<100?(e(),x(t,{key:0,onClick:o[0]||(o[0]=l=>W(0,!0))},{default:h(()=>[s("span",{textContent:_(r.$t("CompleteAll"))},null,8,ae)]),_:1})):(e(),x(t,{key:1,onClick:o[1]||(o[1]=l=>O(0,!0))},{default:h(()=>[s("span",{textContent:_(r.$t("RemoveAll"))},null,8,le)]),_:1}))]),_:1})])]),J((e(),n("ul",re,[(e(!0),n(k,null,C(c.value.components,(l,T)=>(e(),n("li",{key:`weapon-components-${T}`,class:Z(`qp-weapons-detail-components-item${l.is_owned?" qp-isowned":""}`),onClick:u=>l.is_owned?O(l.id):W(l.id)},[s("div",ce,[s("div",ue,[v(te,{component:l.name},null,8,["component"])]),s("div",null,[s("div",pe,[s("span",{textContent:_(r.$t(l.name))},null,8,de)]),s("div",_e,[s("div",null,[(e(!0),n(k,null,C($(l.relics,"Lith"),(u,i)=>(e(),n("span",{key:`component-relics-${i}`},[i>0?(e(),n("span",me,", ")):(e(),n("span",ve,"Lith : ")),s("span",{textContent:_(u.name)},null,8,he)]))),128))]),s("div",null,[(e(!0),n(k,null,C($(l.relics,"Meso"),(u,i)=>(e(),n("span",{key:`component-relics-${i}`},[i>0?(e(),n("span",fe,", ")):(e(),n("span",we,"Meso : ")),s("span",{textContent:_(u.name)},null,8,ye)]))),128))]),s("div",null,[(e(!0),n(k,null,C($(l.relics,"Neo"),(u,i)=>(e(),n("span",{key:`component-relics-${i}`},[i>0?(e(),n("span",ge,", ")):(e(),n("span",ke,"Neo : ")),s("span",{textContent:_(u.name)},null,8,Ce)]))),128))]),s("div",null,[(e(!0),n(k,null,C($(l.relics,"Axi"),(u,i)=>(e(),n("span",{key:`component-relics-${i}`},[i>0?(e(),n("span",qe,", ")):(e(),n("span",$e,"Axi : ")),s("span",{textContent:_(u.name)},null,8,xe)]))),128))])])])])],10,ie))),128))])),[[N,d.value]])]),_:1}),v(L,{span:24,md:10,class:"qp-weapons-detail-picture"},{default:h(()=>[s("div",Ee,[s("div",{class:"qp-weapons-detail-img",style:K(`background-image:url('https://raw.githubusercontent.com/WFCD/warframe-items/master/data/img/${c.value.image_name}')`)},null,4)])]),_:1})]),_:1})])):w.value?(e(),x(j,{key:2})):(e(),x(U,{key:1}))}}});const Oe=ee(be,[["__scopeId","data-v-fb8b9284"]]);export{Oe as default};
