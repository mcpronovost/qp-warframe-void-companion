import{d as ee,u as te,s as se,a as ne,r as c,o as le,b as oe,c as _,w as r,A as B,H as ae,E as y,e as d,f as a,g as $,h as u,i,j as x,t as v,k as g,T as re,F as ie,l as ue,W as ce,m as de,n as pe,p as _e,_ as ve}from"./index-1f7384cd.js";import{q as me,i as fe,a as we,b as ge,c as he}from"./relic_axi-a3d6b66b.js";import"./WeaponImage.vue_vue_type_script_setup_true_lang-e56a4a9a.js";import"./systems-5ba34008.js";const Ce={key:0,class:"qp-container"},ke={class:"qp-relics-actions"},$e={class:"qp-relics-actions-extra"},qe=["textContent"],ye={class:"qp-relics-actions-era"},xe=["textContent"],be=["textContent"],Re=["textContent"],ze=["textContent"],Ee=["textContent"],Le=["onClick"],Ae={class:"qp-relics-item-wrapper"},De={class:"qp-relics-image"},Ve={class:"qp-relics-name"},Ne=["textContent"],Te={key:0,class:"qp-relics-components-count"},Ue=["textContent"],We={class:"qp-relics-rarities"},Me={key:0,class:"qp-relics-rarities-gold"},Se={key:1,class:"qp-relics-rarities-silver"},Be={key:2,class:"qp-relics-rarities-bronze"},He=["textContent"],je=ee({__name:"HomeView",setup(Ge){const{t:q}=te(),H=se(),{rat:z,lang:j,slug:G}=ne(H),h=c(!1),p=c(!1),b=c(null),R=c(!1),C=c(null),V=c([]),E=c([]),N=c(1),L=c(1),A=c(0),T=c(null),U=c(window.innerWidth),m=async(o,e,f=!0)=>{f?p.value=!0:h.value=!0,b.value=null;let w=o?`?page=${o}`:"?page=1";if(w+=e?`&era=${e}`:"",T.value=e,z.value)try{let t=await fetch(`${B}/me/relics/${w}`,{method:"GET",headers:ae(z.value,j.value)}).then(n=>n).catch(()=>new Response(null,{status:400}));if(t.status===200){let n=await t.json();L.value=n.size,A.value=n.count,V.value=n.results,E.value=n.results,h.value=!1,p.value=!1}else throw t.status}catch(t){t===401?y.error(q("Yourenotauthorized")):y.error(q("AnErrorOccurred")),b.value=`${t}`,h.value=!1,p.value=!1}else try{let t=await fetch(`${B}/relics/${w}`,{method:"GET"}).then(n=>n).catch(()=>new Response(null,{status:400}));if(t.status===200){let n=await t.json();L.value=n.size,A.value=n.count,V.value=n.results,E.value=n.results,h.value=!1,p.value=!1}else throw t.status}catch(t){t===401?y.error(q("Yourenotauthorized")):y.error(q("AnErrorOccurred")),b.value=`${t}`,h.value=!1,p.value=!1}},D=(o,e)=>{var w,t,n,k;const f=l=>e=="gold"&&l.is_owned===!1&&l.percent<.1||e=="silver"&&l.is_owned===!1&&l.percent<.2&&l.percent>.09||e=="bronze"&&l.is_owned===!1&&l.percent>.19;return!!((w=o.warframe_rewards)!=null&&w.some(l=>f(l))||(t=o.primaryweapon_rewards)!=null&&t.some(l=>f(l))||(n=o.secondaryweapon_rewards)!=null&&n.some(l=>f(l))||(k=o.meleeweapon_rewards)!=null&&k.some(l=>f(l)))},I=(o=null)=>{C.value=o,R.value=!0},W=()=>{R.value=!1,C.value=null},M=()=>{U.value=window.innerWidth},O=()=>{navigator.clipboard.writeText(`${ce}/u/${G.value}`),y.success(q("Sharelinkcopiedtoclipboard"))};return le(()=>{m(null,null,!1),window.addEventListener("resize",M)}),oe(()=>{window.removeEventListener("resize",M)}),(o,e)=>{const f=d("qp-header"),w=d("el-icon"),t=d("el-button"),n=d("el-button-group"),k=d("el-image"),l=d("el-col"),F=d("el-pagination"),Y=d("el-row"),P=d("el-drawer"),J=d("qp-notfound"),K=d("qp-loading"),Q=d("qp-page"),X=de("loading");return a(),_(Q,null,{default:r(()=>[!h.value&&!b.value?(a(),$("div",Ce,[u(f,{title:o.$t("Relics"),"page-type":"relics"},null,8,["title"]),i("div",ke,[i("div",$e,[x(z)?(a(),_(n,{key:0},{default:r(()=>[u(t,{onClick:e[0]||(e[0]=s=>O())},{default:r(()=>[u(w,{class:"mdi mdi-share-variant"}),i("span",{textContent:v(o.$t("Share"))},null,8,qe)]),_:1})]),_:1})):g("",!0)]),i("div",ye,[u(n,null,{default:r(()=>[u(t,{disabled:p.value,onClick:e[1]||(e[1]=s=>m(null,null,!0))},{default:r(()=>[i("span",{textContent:v(o.$t("All"))},null,8,xe)]),_:1},8,["disabled"]),u(t,{disabled:p.value,onClick:e[2]||(e[2]=s=>m(null,"Lith",!0))},{default:r(()=>[i("span",{textContent:v(o.$t("Lith"))},null,8,be)]),_:1},8,["disabled"]),u(t,{disabled:p.value,onClick:e[3]||(e[3]=s=>m(null,"Meso",!0))},{default:r(()=>[i("span",{textContent:v(o.$t("Meso"))},null,8,Re)]),_:1},8,["disabled"]),u(t,{disabled:p.value,onClick:e[4]||(e[4]=s=>m(null,"Neo",!0))},{default:r(()=>[i("span",{textContent:v(o.$t("Neo"))},null,8,ze)]),_:1},8,["disabled"]),u(t,{disabled:p.value,onClick:e[5]||(e[5]=s=>m(null,"Axi",!0))},{default:r(()=>[i("span",{textContent:v(o.$t("Axi"))},null,8,Ee)]),_:1},8,["disabled"])]),_:1})])]),u(Y,{class:"qp-relics-list"},{default:r(()=>[u(re,{name:"list",mode:"out-in"},{default:r(()=>[(a(!0),$(ie,null,ue(E.value,(s,Z)=>pe((a(),_(l,{key:`relics-${Z}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:r(()=>{var S;return[i("div",{class:"qp-relics-item",onClick:Ie=>I(s)},[i("div",Ae,[i("div",De,[u(_e,null,{default:r(()=>[s.era=="Lith"?(a(),_(k,{key:0,src:x(fe)},null,8,["src"])):s.era=="Meso"?(a(),_(k,{key:1,src:x(we)},null,8,["src"])):s.era=="Neo"?(a(),_(k,{key:2,src:x(ge)},null,8,["src"])):s.era=="Axi"?(a(),_(k,{key:3,src:x(he)},null,8,["src"])):g("",!0)]),_:2},1024)]),i("div",Ve,[i("span",{textContent:v(`${s.era} ${s.name}`)},null,8,Ne)]),((S=s.components)==null?void 0:S.length)>1?(a(),$("div",Te,[i("span",{textContent:v(`x${s.components.length}`)},null,8,Ue)])):g("",!0),i("div",We,[D(s,"gold")?(a(),$("span",Me)):g("",!0),D(s,"silver")?(a(),$("span",Se)):g("",!0),D(s,"bronze")?(a(),$("span",Be)):g("",!0)])])],8,Le)]}),_:2},1024)),[[X,p.value]])),128))]),_:1}),u(l,null,{default:r(()=>[u(F,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":N.value,"onUpdate:current-page":e[6]||(e[6]=s=>N.value=s),"page-size":L.value,total:A.value,onCurrentChange:m},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),u(P,{modelValue:R.value,"onUpdate:modelValue":e[8]||(e[8]=s=>R.value=s),direction:"rtl",size:U.value<992?"90%":"30%","before-close":W,class:"qp-relic-drawer"},{header:r(()=>[C.value?(a(),$("span",{key:0,class:"el-drawer__title",textContent:v(`${C.value.era} ${C.value.name}`)},null,8,He)):g("",!0)]),default:r(()=>[C.value?(a(),_(me,{key:0,relic:C.value,onClose:e[7]||(e[7]=s=>{W(),m(null,T.value,!0)})},null,8,["relic"])):g("",!0)]),_:1},8,["modelValue","size"])])):h.value?(a(),_(K,{key:2})):(a(),_(J,{key:1}))]),_:1})}}});const Je=ve(je,[["__scopeId","data-v-d31859c2"]]);export{Je as default};
