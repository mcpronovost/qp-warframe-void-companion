import{d as G,u as J,s as K,a as Q,r as g,o as X,f as e,g as a,h as D,w as h,i as n,j as k,c as u,t as f,k as L,n as Y,F as C,l as q,M as Z,A as R,H as W,E as v,N as z,e as m,m as ee,v as te,D as se,q as ae,_ as ne}from"./index-1f7384cd.js";import{i as oe,a as re,b as le,c as ie}from"./systems-5ba34008.js";const ce={key:0,class:"qp-container"},ue={class:"qp-warframes-actions"},de={class:"qp-warframes-actions-extra"},me=["textContent"],pe=["textContent"],_e={class:"qp-warframes-detail-components-list"},fe=["onClick"],he={class:"qp-warframes-detail-components-item-wrapper"},ve={class:"qp-warframes-detail-components-img"},we={class:"qp-warframe-detail-components-name"},ye=["textContent"],ge={class:"qp-warframe-detail-components-relics"},ke={key:0},Ce={key:1,class:"qp-warframe-detail-components-era"},qe=["textContent"],$e={key:0},xe={key:1,class:"qp-warframe-detail-components-era"},be=["textContent"],Ee={key:0},De={key:1,class:"qp-warframe-detail-components-era"},Ae=["textContent"],Se={key:0},Ne={key:1,class:"qp-warframe-detail-components-era"},Re=["textContent"],We={class:"qp-warframes-detail-image"},Oe=G({__name:"WarframesDetail",setup(Ue){const{t:p}=J(),F=te(),M=se(),j=K(),{rat:$,lang:A,id:Be}=Q(j),w=g(!1),_=g(!1),S=g(null),x=g(null),c=g(),N=async(l=!1)=>{l||(w.value=!0),S.value=null;try{let t=await fetch(`${R}/warframes/${F.params.pk}/`,{method:"GET",headers:W($.value,A.value)}).then(o=>o).catch(()=>new Response(null,{status:400}));if(t.status===200){let o=await t.json();c.value=o,w.value=!1}else throw t.status}catch(t){t===401?v.error("not authorized"):v.error(p("AnErrorOccurred")),S.value=`${t}`,w.value=!1}},O=async(l,t=!1)=>{_.value=!0,x.value=null;let o=new FormData;c.value&&t?o.append("id",c.value.components.map(s=>s.id.toString()).join(",")):o.append("id",l.toString());try{let s=await fetch(`${R}/me/warframes/components/create/`,{method:"POST",body:o,headers:W($.value,A.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(s.status===201)z({message:p(t?"ComponentsUpdated":"ComponentUpdated"),type:"success",position:"bottom-right",showClose:!0}),_.value=!1,t?M.push({name:"Warframes"}):N(!0);else throw s.status}catch(s){s===401?v.error("not authorized"):v.error(p("AnErrorOccurred")),x.value=`${s}`,_.value=!1}},U=async(l,t=!1)=>{_.value=!0,x.value=null;let o=new FormData;c.value&&t&&o.append("ids",c.value.components.map(s=>s.id.toString()).join(","));try{let s=await fetch(`${R}/me/warframes/components/${l}/delete/`,{method:"DELETE",body:o,headers:W($.value,A.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(s.status===204)z({message:p(t?"ComponentsUpdated":"ComponentUpdated"),type:"success",position:"bottom-right",showClose:!0}),_.value=!1,N(!0);else throw s.status}catch(s){s===401?v.error("not authorized"):v.error(p("AnErrorOccurred")),x.value=`${s}`,_.value=!1}},b=(l,t)=>{let o=l.filter(s=>s.era==t);return o!=null&&o.length?o:[]};return X(()=>{N()}),(l,t)=>{const o=m("qp-header"),s=m("el-button"),y=m("el-button-group"),E=m("el-image"),B=m("el-col"),T=m("el-row"),I=m("qp-notfound"),V=m("qp-loading"),H=ee("loading");return!w.value&&!S.value&&c.value?(e(),a("div",ce,[D(o,{title:c.value.name,"page-type":"warframe"},null,8,["title"]),D(T,{class:"qp-warframes-detail"},{default:h(()=>[D(B,{span:24,md:14,class:"qp-warframes-detail-info"},{default:h(()=>[n("div",ue,[n("div",de,[k($)?(e(),u(y,{key:0},{default:h(()=>[c.value.completion<100?(e(),u(s,{key:0,onClick:t[0]||(t[0]=r=>O(0,!0))},{default:h(()=>[n("span",{textContent:f(l.$t("CompleteAll"))},null,8,me)]),_:1})):(e(),u(s,{key:1,onClick:t[1]||(t[1]=r=>U(0,!0))},{default:h(()=>[n("span",{textContent:f(l.$t("RemoveAll"))},null,8,pe)]),_:1}))]),_:1})):L("",!0)])]),Y((e(),a("ul",_e,[(e(!0),a(C,null,q(c.value.components,(r,P)=>(e(),a("li",{key:`warframe-components-${P}`,class:ae(`qp-warframes-detail-components-item${r.is_owned?" qp-isowned":""}`),onClick:d=>r.is_owned?U(r.id):O(r.id)},[n("div",he,[n("div",ve,[r.name=="blueprint"?(e(),u(E,{key:0,src:k(oe)},null,8,["src"])):r.name=="chassis"?(e(),u(E,{key:1,src:k(re)},null,8,["src"])):r.name=="neuroptics"?(e(),u(E,{key:2,src:k(le)},null,8,["src"])):r.name=="systems"?(e(),u(E,{key:3,src:k(ie)},null,8,["src"])):L("",!0)]),n("div",null,[n("div",we,[n("span",{textContent:f(l.$t(r.name))},null,8,ye)]),n("div",ge,[n("div",null,[(e(!0),a(C,null,q(b(r.relics,"Lith"),(d,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",ke,", ")):(e(),a("span",Ce,"Lith : ")),n("span",{textContent:f(d.name)},null,8,qe)]))),128))]),n("div",null,[(e(!0),a(C,null,q(b(r.relics,"Meso"),(d,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",$e,", ")):(e(),a("span",xe,"Meso : ")),n("span",{textContent:f(d.name)},null,8,be)]))),128))]),n("div",null,[(e(!0),a(C,null,q(b(r.relics,"Neo"),(d,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",Ee,", ")):(e(),a("span",De,"Neo : ")),n("span",{textContent:f(d.name)},null,8,Ae)]))),128))]),n("div",null,[(e(!0),a(C,null,q(b(r.relics,"Axi"),(d,i)=>(e(),a("span",{key:`component-relics-${i}`},[i>0?(e(),a("span",Se,", ")):(e(),a("span",Ne,"Axi : ")),n("span",{textContent:f(d.name)},null,8,Re)]))),128))])])])])],10,fe))),128))])),[[H,_.value]])]),_:1}),D(B,{span:24,md:10,class:"qp-warframes-detail-picture"},{default:h(()=>[n("div",We,[n("div",{class:"qp-warframes-detail-img",style:Z(`background-image:url('https://raw.githubusercontent.com/WFCD/warframe-items/master/data/img/${c.value.image_name}')`)},null,4)])]),_:1})]),_:1})])):w.value?(e(),u(V,{key:2})):(e(),u(I,{key:1}))}}});const Fe=ne(Oe,[["__scopeId","data-v-2b7b549e"]]);export{Fe as default};
