import{d as K,u as Q,r,o as X,b as Y,c as _,w as a,A as Z,E as W,e as p,v as ee,f as s,g as h,h as u,i,t as g,n as te,F as ne,l as se,T as le,k as C,m as oe,p as ae,j as y,_ as re}from"./index-1f7384cd.js";import{q as ie,i as ue,a as de,b as ce,c as pe}from"./relic_axi-a3d6b66b.js";import"./WeaponImage.vue_vue_type_script_setup_true_lang-e56a4a9a.js";import"./systems-5ba34008.js";const _e={key:0,class:"qp-container"},ve={class:"qp-relics-actions-era"},me=["textContent"],fe=["textContent"],ge=["textContent"],we=["textContent"],he=["textContent"],Ce=["onClick"],ke={class:"qp-relics-item-wrapper"},$e={class:"qp-relics-image"},qe={class:"qp-relics-name"},ye=["textContent"],be={key:0,class:"qp-relics-components-count"},xe=["textContent"],Re={class:"qp-relics-rarities"},ze={key:0,class:"qp-relics-rarities-gold"},Le={key:1,class:"qp-relics-rarities-silver"},Ee={key:2,class:"qp-relics-rarities-bronze"},Ve=["textContent"],Ae=K({__name:"UserView",setup(De){const{t:B}=Q(),T=ee(),k=r(!1),v=r(!1),b=r(null),q=r(!1),w=r(null),R=r(""),I=r([]),z=r([]),L=r(0),E=r(1),V=r(1),A=r(null),D=r(window.innerWidth),m=async(l,e,f=!1)=>{f?v.value=!0:k.value=!0,b.value=null;let d=l?`?page=${l}`:"?page=1";d+=e?`&era=${e}`:"",A.value=e;try{let c=await fetch(`${Z}/users/${T.params.slug}/relics/${d}`,{method:"GET"}).then(o=>o).catch(()=>new Response(null,{status:400}));if(c.status===200){let o=await c.json();R.value=o.user,L.value=o.count,E.value=o.size,I.value=o.results,z.value=o.results,k.value=!1,v.value=!1}else throw c.status}catch(c){c===401?W.error("not authorized"):W.error(B("AnErrorOccurred")),b.value=`${c}`,k.value=!1,v.value=!1}},x=(l,e)=>{var d,c,o,$;const f=n=>e=="gold"&&n.is_owned===!1&&n.percent<.1||e=="silver"&&n.is_owned===!1&&n.percent<.2&&n.percent>.09||e=="bronze"&&n.is_owned===!1&&n.percent>.19;return!!((d=l.warframe_rewards)!=null&&d.some(n=>f(n))||(c=l.primaryweapon_rewards)!=null&&c.some(n=>f(n))||(o=l.secondaryweapon_rewards)!=null&&o.some(n=>f(n))||($=l.meleeweapon_rewards)!=null&&$.some(n=>f(n)))},O=(l=null)=>{w.value=l,q.value=!0},N=()=>{q.value=!1,w.value=null},U=()=>{D.value=window.innerWidth};return X(()=>{m(null,null),window.addEventListener("resize",U)}),Y(()=>{window.removeEventListener("resize",U)}),(l,e)=>{const f=p("qp-header"),d=p("el-button"),c=p("el-button-group"),o=p("el-image"),$=p("el-col"),n=p("el-pagination"),j=p("el-row"),F=p("el-drawer"),G=p("qp-notfound"),P=p("qp-loading"),S=p("qp-page"),H=oe("loading");return s(),_(S,null,{default:a(()=>[!k.value&&!b.value?(s(),h("div",_e,[u(f,{title:l.$t("RelicsOf",[R.value]),"page-type":"relics"},null,8,["title"]),i("div",ve,[u(c,null,{default:a(()=>[u(d,{disabled:v.value,onClick:e[0]||(e[0]=t=>m(null,null,!0))},{default:a(()=>[i("span",{textContent:g(l.$t("All"))},null,8,me)]),_:1},8,["disabled"]),u(d,{disabled:v.value,onClick:e[1]||(e[1]=t=>m(null,"Lith",!0))},{default:a(()=>[i("span",{textContent:g(l.$t("Lith"))},null,8,fe)]),_:1},8,["disabled"]),u(d,{disabled:v.value,onClick:e[2]||(e[2]=t=>m(null,"Meso",!0))},{default:a(()=>[i("span",{textContent:g(l.$t("Meso"))},null,8,ge)]),_:1},8,["disabled"]),u(d,{disabled:v.value,onClick:e[3]||(e[3]=t=>m(null,"Neo",!0))},{default:a(()=>[i("span",{textContent:g(l.$t("Neo"))},null,8,we)]),_:1},8,["disabled"]),u(d,{disabled:v.value,onClick:e[4]||(e[4]=t=>m(null,"Axi",!0))},{default:a(()=>[i("span",{textContent:g(l.$t("Axi"))},null,8,he)]),_:1},8,["disabled"])]),_:1})]),te((s(),_(j,{class:"qp-relics-list"},{default:a(()=>[u(le,{name:"list",mode:"out-in"},{default:a(()=>[(s(!0),h(ne,null,se(z.value,(t,J)=>(s(),_($,{key:`relics-${J}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:a(()=>{var M;return[i("div",{class:"qp-relics-item",onClick:Ne=>O(t)},[i("div",ke,[i("div",$e,[u(ae,null,{default:a(()=>[t.era=="Lith"?(s(),_(o,{key:0,src:y(ue)},null,8,["src"])):t.era=="Meso"?(s(),_(o,{key:1,src:y(de)},null,8,["src"])):t.era=="Neo"?(s(),_(o,{key:2,src:y(ce)},null,8,["src"])):t.era=="Axi"?(s(),_(o,{key:3,src:y(pe)},null,8,["src"])):C("",!0)]),_:2},1024)]),i("div",qe,[i("span",{textContent:g(`${t.era} ${t.name}`)},null,8,ye)]),((M=t.components)==null?void 0:M.length)>1?(s(),h("div",be,[i("span",{textContent:g(`x${t.components.length}`)},null,8,xe)])):C("",!0),i("div",Re,[x(t,"gold")?(s(),h("span",ze)):C("",!0),x(t,"silver")?(s(),h("span",Le)):C("",!0),x(t,"bronze")?(s(),h("span",Ee)):C("",!0)])])],8,Ce)]}),_:2},1024))),128))]),_:1}),u($,null,{default:a(()=>[u(n,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":V.value,"onUpdate:current-page":e[5]||(e[5]=t=>V.value=t),"page-size":E.value,total:L.value,onCurrentChange:m},null,8,["current-page","page-size","total"])]),_:1})]),_:1})),[[H,v.value]]),u(F,{modelValue:q.value,"onUpdate:modelValue":e[7]||(e[7]=t=>q.value=t),direction:"rtl",size:D.value<992?"90%":"30%","before-close":N},{header:a(()=>[w.value?(s(),h("span",{key:0,class:"el-drawer__title",textContent:g(`${w.value.era} ${w.value.name}`)},null,8,Ve)):C("",!0)]),default:a(()=>[w.value?(s(),_(ie,{key:0,relic:w.value,readonly:!0,onClose:e[6]||(e[6]=t=>{N(),m(null,A.value,!0)})},null,8,["relic"])):C("",!0)]),_:1},8,["modelValue","size"])])):k.value?(s(),_(P,{key:2})):(s(),_(G,{key:1}))]),_:1})}}});const Te=re(Ae,[["__scopeId","data-v-e8e791e6"]]);export{Te as default};
