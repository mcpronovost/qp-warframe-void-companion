import{d as J,u as K,s as X,a as Z,r,o as ee,b as te,c as m,w as t,A as W,H as ne,E as k,e as i,f as d,g as x,h as n,i as c,j as le,t as v,k as q,T as se,F as oe,l as ae,W as re,m as ie,n as ue,_ as de}from"./index-13251ea8.js";import{Q as ce,a as pe}from"./RelicItem-ce644bce.js";import"./WeaponImage.vue_vue_type_script_setup_true_lang-b9aabe63.js";import"./systems-5ba34008.js";const _e={key:0,class:"qp-container"},ve={class:"qp-relics-actions"},me={class:"qp-relics-actions-extra"},fe=["textContent"],ge={class:"qp-relics-actions-era"},we=["textContent"],Ce=["textContent"],$e=["textContent"],he=["textContent"],be=["textContent"],ke=["textContent"],xe=J({__name:"HomeView",setup(qe){const{t:C}=K(),S=X(),{rat:$,lang:T,slug:B}=Z(S),f=r(!1),u=r(!1),h=r(null),w=r(!1),_=r(null),H=r([]),y=r([]),R=r(1),E=r(1),z=r(0),D=r(null),L=r(window.innerWidth),p=async(o,e,b=!0)=>{b?u.value=!0:f.value=!0,h.value=null;let g=o?`?page=${o}`:"?page=1";g+=e?`&era=${e}`:"",D.value=e;let a;try{if($.value?a=await fetch(`${W}/me/relics/${g}`,{method:"GET",headers:ne($.value,T.value)}).then(l=>l).catch(()=>new Response(null,{status:400})):a=await fetch(`${W}/relics/${g}`,{method:"GET"}).then(l=>l).catch(()=>new Response(null,{status:400})),a.status===200){let l=await a.json();E.value=l.size,z.value=l.count,H.value=l.results,y.value=l.results,f.value=!1,u.value=!1}else throw a.status}catch(l){l===401?k.error(C("Yourenotauthorized")):k.error(C("AnErrorOccurred")),h.value=`${l}`,f.value=!1,u.value=!1}},N=(o=null)=>{_.value=o,w.value=!0},V=()=>{w.value=!1,_.value=null},A=()=>{L.value=window.innerWidth},I=()=>{navigator.clipboard.writeText(`${re}/u/${B.value}`),k.success(C("Sharelinkcopiedtoclipboard"))};return ee(()=>{p(null,null,!1),window.addEventListener("resize",A)}),te(()=>{window.removeEventListener("resize",A)}),(o,e)=>{const b=i("qp-header"),g=i("el-icon"),a=i("el-button"),l=i("el-button-group"),U=i("el-col"),M=i("el-pagination"),G=i("el-row"),Q=i("el-drawer"),j=i("qp-notfound"),F=i("qp-loading"),O=i("qp-page"),P=ie("loading");return d(),m(O,null,{default:t(()=>[!f.value&&!h.value?(d(),x("div",_e,[n(b,{title:o.$t("Relics"),"page-type":"relics"},null,8,["title"]),c("div",ve,[c("div",me,[le($)?(d(),m(l,{key:0},{default:t(()=>[n(a,{onClick:e[0]||(e[0]=s=>I())},{default:t(()=>[n(g,{class:"mdi mdi-share-variant"}),c("span",{textContent:v(o.$t("Share"))},null,8,fe)]),_:1})]),_:1})):q("",!0)]),c("div",ge,[n(l,null,{default:t(()=>[n(a,{disabled:u.value,onClick:e[1]||(e[1]=s=>p(null,null,!0))},{default:t(()=>[c("span",{textContent:v(o.$t("All"))},null,8,we)]),_:1},8,["disabled"]),n(a,{disabled:u.value,onClick:e[2]||(e[2]=s=>p(null,"Lith",!0))},{default:t(()=>[c("span",{textContent:v(o.$t("Lith"))},null,8,Ce)]),_:1},8,["disabled"]),n(a,{disabled:u.value,onClick:e[3]||(e[3]=s=>p(null,"Meso",!0))},{default:t(()=>[c("span",{textContent:v(o.$t("Meso"))},null,8,$e)]),_:1},8,["disabled"]),n(a,{disabled:u.value,onClick:e[4]||(e[4]=s=>p(null,"Neo",!0))},{default:t(()=>[c("span",{textContent:v(o.$t("Neo"))},null,8,he)]),_:1},8,["disabled"]),n(a,{disabled:u.value,onClick:e[5]||(e[5]=s=>p(null,"Axi",!0))},{default:t(()=>[c("span",{textContent:v(o.$t("Axi"))},null,8,be)]),_:1},8,["disabled"])]),_:1})])]),n(G,{class:"qp-relics-list"},{default:t(()=>[n(se,{name:"list",mode:"out-in"},{default:t(()=>[(d(!0),x(oe,null,ae(y.value,(s,Y)=>ue((d(),m(U,{key:`relics-${Y}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:t(()=>[n(pe,{relic:s,onClick:ye=>N(s)},null,8,["relic","onClick"])]),_:2},1024)),[[P,u.value]])),128))]),_:1}),n(U,null,{default:t(()=>[n(M,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":R.value,"onUpdate:current-page":e[6]||(e[6]=s=>R.value=s),"page-size":E.value,total:z.value,onCurrentChange:p},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),n(Q,{modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=s=>w.value=s),direction:"rtl",size:L.value<992?"90%":"30%","before-close":V,class:"qp-relic-drawer"},{header:t(()=>[_.value?(d(),x("span",{key:0,class:"el-drawer__title",textContent:v(`${_.value.era} ${_.value.name}`)},null,8,ke)):q("",!0)]),default:t(()=>[_.value?(d(),m(ce,{key:0,relic:_.value,onClose:e[7]||(e[7]=s=>{V(),p(null,D.value,!0)})},null,8,["relic"])):q("",!0)]),_:1},8,["modelValue","size"])])):f.value?(d(),m(F,{key:2})):(d(),m(j,{key:1}))]),_:1})}}});const Le=de(xe,[["__scopeId","data-v-b7052a0b"]]);export{Le as default};
