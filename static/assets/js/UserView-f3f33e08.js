import{d as H,u as J,r as l,o as K,b as Q,c,w as s,A as X,E as N,f as u,x as Y,g as n,h as f,i,j as o,t as m,n as Z,F as ee,k as te,T as ne,l as h,m as se,p as le,q as k,_ as oe}from"./index-0f729360.js";import{q as ae,i as ie,a as re,b as ue,c as ce}from"./relic_axi-2ac4d25e.js";import"./blueprint-b6c1ffa1.js";import"./systems-8cdc0256.js";import"./prime_upperlimb-dec5463d.js";const de={key:0,class:"qp-container"},pe={class:"qp-relics-actions-era"},_e=["textContent"],ve=["textContent"],me=["textContent"],ge=["textContent"],fe=["textContent"],he=["onClick"],we={class:"qp-relics-item-wrapper"},Ce={class:"qp-relics-image"},ke={class:"qp-relics-name"},qe=["textContent"],$e={key:0,class:"qp-relics-components-count"},be=["textContent"],ye={class:"qp-relics-rarities"},xe={key:0,class:"qp-relics-rarities-gold"},Re={key:1,class:"qp-relics-rarities-silver"},ze={key:2,class:"qp-relics-rarities-bronze"},Le=["textContent"],Ee=H({__name:"UserView",setup(Ve){const{t:U}=J(),M=Y(),w=l(!1),d=l(!1),q=l(null),C=l(!1),g=l(null),b=l(""),W=l([]),y=l([]),x=l(0),R=l(1),z=l(1),L=l(null),E=l(window.innerWidth),p=async(r,t,$=!1)=>{$?d.value=!0:w.value=!0,q.value=null;let _=r?`?page=${r}`:"?page=1";_+=t?`&era=${t}`:"",L.value=t;try{let v=await fetch(`${X}/users/${M.params.slug}/relics/${_}`,{method:"GET"}).then(a=>a).catch(()=>new Response(null,{status:400}));if(v.status===200){let a=await v.json();b.value=a.user,x.value=a.count,R.value=a.size,W.value=a.results,y.value=a.results,w.value=!1,d.value=!1}else throw v.status}catch(v){v===401?N.error("not authorized"):N.error(U("AnErrorOccurred")),q.value=`${v}`,w.value=!1,d.value=!1}},B=(r=null)=>{g.value=r,C.value=!0},V=()=>{C.value=!1,g.value=null},A=()=>{E.value=window.innerWidth};return K(()=>{p(null,null),window.addEventListener("resize",A)}),Q(()=>{window.removeEventListener("resize",A)}),(r,t)=>{const $=u("qp-header"),_=u("el-button"),v=u("el-button-group"),a=u("el-image"),D=u("el-col"),T=u("el-pagination"),I=u("el-row"),O=u("el-drawer"),j=u("qp-notfound"),F=u("qp-loading"),G=u("qp-page"),P=se("loading");return n(),c(G,null,{default:s(()=>[!w.value&&!q.value?(n(),f("div",de,[i($,{title:r.$t("RelicsOf",[b.value]),"page-type":"relics"},null,8,["title"]),o("div",pe,[i(v,null,{default:s(()=>[i(_,{disabled:d.value,onClick:t[0]||(t[0]=e=>p(null,null,!0))},{default:s(()=>[o("span",{textContent:m(r.$t("All"))},null,8,_e)]),_:1},8,["disabled"]),i(_,{disabled:d.value,onClick:t[1]||(t[1]=e=>p(null,"Lith",!0))},{default:s(()=>[o("span",{textContent:m(r.$t("Lith"))},null,8,ve)]),_:1},8,["disabled"]),i(_,{disabled:d.value,onClick:t[2]||(t[2]=e=>p(null,"Meso",!0))},{default:s(()=>[o("span",{textContent:m(r.$t("Meso"))},null,8,me)]),_:1},8,["disabled"]),i(_,{disabled:d.value,onClick:t[3]||(t[3]=e=>p(null,"Neo",!0))},{default:s(()=>[o("span",{textContent:m(r.$t("Neo"))},null,8,ge)]),_:1},8,["disabled"]),i(_,{disabled:d.value,onClick:t[4]||(t[4]=e=>p(null,"Axi",!0))},{default:s(()=>[o("span",{textContent:m(r.$t("Axi"))},null,8,fe)]),_:1},8,["disabled"])]),_:1})]),Z((n(),c(I,{class:"qp-relics-list"},{default:s(()=>[i(ne,{name:"list",mode:"out-in"},{default:s(()=>[(n(!0),f(ee,null,te(y.value,(e,S)=>(n(),c(D,{key:`relics-${S}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:s(()=>[o("div",{class:"qp-relics-item",onClick:Ae=>B(e)},[o("div",we,[o("div",Ce,[i(le,null,{default:s(()=>[e.era=="Lith"?(n(),c(a,{key:0,src:k(ie)},null,8,["src"])):e.era=="Meso"?(n(),c(a,{key:1,src:k(re)},null,8,["src"])):e.era=="Neo"?(n(),c(a,{key:2,src:k(ue)},null,8,["src"])):e.era=="Axi"?(n(),c(a,{key:3,src:k(ce)},null,8,["src"])):h("",!0)]),_:2},1024)]),o("div",ke,[o("span",{textContent:m(`${e.era} ${e.name}`)},null,8,qe)]),e.components.length>1?(n(),f("div",$e,[o("span",{textContent:m(`x${e.components.length}`)},null,8,be)])):h("",!0),o("div",ye,[e.rarities.gold?(n(),f("span",xe)):h("",!0),e.rarities.silver?(n(),f("span",Re)):h("",!0),e.rarities.bronze?(n(),f("span",ze)):h("",!0)])])],8,he)]),_:2},1024))),128))]),_:1}),i(D,null,{default:s(()=>[i(T,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":z.value,"onUpdate:current-page":t[5]||(t[5]=e=>z.value=e),"page-size":R.value,total:x.value,onCurrentChange:p},null,8,["current-page","page-size","total"])]),_:1})]),_:1})),[[P,d.value]]),i(O,{modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=e=>C.value=e),direction:"rtl",size:E.value<992?"90%":"30%","before-close":V},{header:s(()=>[g.value?(n(),f("span",{key:0,class:"el-drawer__title",textContent:m(`${g.value.era} ${g.value.name}`)},null,8,Le)):h("",!0)]),default:s(()=>[g.value?(n(),c(ae,{key:0,relic:g.value,readonly:!0,onClose:t[6]||(t[6]=e=>{V(),p(null,L.value,!0)})},null,8,["relic"])):h("",!0)]),_:1},8,["modelValue","size"])])):w.value?(n(),c(F,{key:2})):(n(),c(j,{key:1}))]),_:1})}}});const Be=oe(Ee,[["__scopeId","data-v-48bb1782"]]);export{Be as default};
