import{d as ne,u as oe,s as le,a as ae,r as u,o as re,b as ie,c as d,w as i,e as ce,A as M,H as T,E as k,f as _,g as e,h as c,i as p,j as n,t as v,T as ue,F as W,k as H,l as m,m as de,n as pe,p as _e,q as g,_ as ve}from"./index-f7c30c69.js";import{i as me,a as he,b as ge,c as fe}from"./relic_axi-05cc5723.js";import{i as we,a as ye,b as ke,c as Ce}from"./systems-5ba34008.js";const qe={key:0,class:"qp-container"},$e={class:"qp-relics-actions-era"},xe=["textContent"],Re=["textContent"],be=["textContent"],Ee=["textContent"],ze=["textContent"],Ae=["onClick"],Le={class:"qp-relics-item-wrapper"},De={class:"qp-relics-image"},Ve={class:"qp-relics-name"},Ne=["textContent"],Be={key:0,class:"qp-relics-components-count"},Oe=["textContent"],Se={class:"qp-relics-rarities"},Ue={key:0,class:"qp-relics-rarities-gold"},Me={key:1,class:"qp-relics-rarities-silver"},Te={key:2,class:"qp-relics-rarities-bronze"},We=["textContent"],He={key:0,class:"qp-relics-drawer-components-list"},Fe=["onClick"],Ie={class:"qp-relics-drawer-components-item-wrapper"},je={class:"qp-relics-drawer-components-img"},Ge={class:"qp-relics-drawer-components-name"},Pe=["textContent"],Je={class:"qp-relics-drawer-rarities"},Ke={key:0,class:"qp-relics-drawer-rarities-gold"},Qe={key:1,class:"qp-relics-drawer-rarities-silver"},Xe={key:2,class:"qp-relics-drawer-rarities-bronze"},Ye=ne({__name:"HomeView",setup(Ze){const{t:z}=oe(),F=ce(),I=le(),{rat:x,lang:A,id:et}=ae(I),w=u(!1),C=u(!1),R=u(null),L=u(null),q=u(!1),f=u(null),b=u([]),$=u([]),D=u(0),V=u(1),N=u(1),B=u(window.innerWidth),E=async o=>{w.value=!0,R.value=null;let s=o?`?page=${o}`:"",l=await fetch(`${M}/me/relics/${s}`,{method:"GET",headers:T(x.value,A.value)}).then(a=>a).catch(()=>new Response(null,{status:400}));if(l.status===200){let a=await l.json();D.value=a.count,V.value=a.size,b.value=a.results,$.value=a.results,w.value=!1}else l.status===401?k.error("not authorized"):k.error("AnErrorOccurred"),R.value=`${l.status}`,w.value=!1},j=(o,s)=>{let l=o.filter(a=>a.era==s);return l!=null&&l.length?l:[]},y=(o=null)=>{o?$.value=j(b.value,o):$.value=b.value},G=(o=null)=>{f.value=o,q.value=!0},O=()=>{q.value=!1,f.value=null},S=()=>{B.value=window.innerWidth},P=async o=>{C.value=!0,L.value=null;let s=new FormData;s.append("id",o.toString());try{let l=await fetch(`${M}/me/warframes/components/create/`,{method:"POST",body:s,headers:T(x.value,A.value)}).then(a=>a).catch(()=>new Response(null,{status:400}));if(l.status===201)k.success(z("ComponentUpdated")),C.value=!1,O(),E();else throw l.status}catch(l){l===401?k.error("not authorized"):k.error(z("AnErrorOccurred")),L.value=`${l}`,C.value=!1}};return re(()=>{x.value?(E(),window.addEventListener("resize",S)):F.push({name:"AuthLogin"})}),ie(()=>{window.removeEventListener("resize",S)}),(o,s)=>{const l=_("qp-header"),a=_("el-button"),J=_("el-button-group"),h=_("el-image"),K=_("el-col"),Q=_("el-row"),X=_("el-pagination"),Y=_("el-drawer"),Z=_("qp-notfound"),ee=_("qp-loading"),te=_("qp-page"),se=pe("loading");return e(),d(te,null,{default:i(()=>[!w.value&&!R.value?(e(),c("div",qe,[p(l,{title:o.$t("Relics"),"page-type":"relics"},null,8,["title"]),n("div",$e,[p(J,null,{default:i(()=>[p(a,{onClick:s[0]||(s[0]=t=>y())},{default:i(()=>[n("span",{textContent:v(o.$t("All"))},null,8,xe)]),_:1}),p(a,{onClick:s[1]||(s[1]=t=>y("Lith"))},{default:i(()=>[n("span",{textContent:v(o.$t("Lith"))},null,8,Re)]),_:1}),p(a,{onClick:s[2]||(s[2]=t=>y("Meso"))},{default:i(()=>[n("span",{textContent:v(o.$t("Meso"))},null,8,be)]),_:1}),p(a,{onClick:s[3]||(s[3]=t=>y("Neo"))},{default:i(()=>[n("span",{textContent:v(o.$t("Neo"))},null,8,Ee)]),_:1}),p(a,{onClick:s[4]||(s[4]=t=>y("Axi"))},{default:i(()=>[n("span",{textContent:v(o.$t("Axi"))},null,8,ze)]),_:1})]),_:1})]),p(Q,{class:"qp-relics-list"},{default:i(()=>[p(ue,{name:"list",mode:"out-in"},{default:i(()=>[(e(!0),c(W,null,H($.value,(t,r)=>(e(),d(K,{key:`relics-${r}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:i(()=>[n("div",{class:"qp-relics-item",onClick:U=>G(t)},[n("div",Le,[n("div",De,[p(_e,null,{default:i(()=>[t.era=="Lith"?(e(),d(h,{key:0,src:g(me)},null,8,["src"])):t.era=="Meso"?(e(),d(h,{key:1,src:g(he)},null,8,["src"])):t.era=="Neo"?(e(),d(h,{key:2,src:g(ge)},null,8,["src"])):t.era=="Axi"?(e(),d(h,{key:3,src:g(fe)},null,8,["src"])):m("",!0)]),_:2},1024)]),n("div",Ve,[n("span",{textContent:v(`${t.era} ${t.name}`)},null,8,Ne)]),t.components.length>1?(e(),c("div",Be,[n("span",{textContent:v(`x${t.components.length}`)},null,8,Oe)])):m("",!0),n("div",Se,[t.rarities.gold?(e(),c("span",Ue)):m("",!0),t.rarities.silver?(e(),c("span",Me)):m("",!0),t.rarities.bronze?(e(),c("span",Te)):m("",!0)])])],8,Ae)]),_:2},1024))),128))]),_:1})]),_:1}),p(X,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":N.value,"onUpdate:current-page":s[5]||(s[5]=t=>N.value=t),"page-size":V.value,total:D.value,onCurrentChange:E},null,8,["current-page","page-size","total"]),p(Y,{modelValue:q.value,"onUpdate:modelValue":s[6]||(s[6]=t=>q.value=t),direction:"rtl",size:B.value<992?"90%":"30%","before-close":O},{header:i(()=>[f.value?(e(),c("span",{key:0,class:"el-drawer__title",textContent:v(`${f.value.era} ${f.value.name}`)},null,8,We)):m("",!0)]),default:i(()=>{var t;return[n("div",null,[(t=f.value)!=null&&t.components?de((e(),c("ul",He,[(e(!0),c(W,null,H(f.value.components,(r,U)=>(e(),c("li",{key:`warframe-components-${U}`,class:"qp-relics-drawer-components-item",onClick:tt=>r.type=="warframe"?P(r.id):""},[n("div",Ie,[n("div",je,[r.component=="blueprint"?(e(),d(h,{key:0,src:g(we)},null,8,["src"])):r.component=="chassis"?(e(),d(h,{key:1,src:g(ye)},null,8,["src"])):r.component=="neuroptics"?(e(),d(h,{key:2,src:g(ke)},null,8,["src"])):r.component=="systems"?(e(),d(h,{key:3,src:g(Ce)},null,8,["src"])):m("",!0)]),n("div",null,[n("div",Ge,[n("span",{textContent:v(r.name)},null,8,Pe)]),n("div",Je,[r.percent<10?(e(),c("span",Ke)):r.percent>9&&r.percent<20?(e(),c("span",Qe)):r.percent>19?(e(),c("span",Xe)):m("",!0)])])])],8,Fe))),128))])),[[se,C.value]]):m("",!0)])]}),_:1},8,["modelValue","size"])])):w.value?(e(),d(ee,{key:2})):(e(),d(Z,{key:1}))]),_:1})}}});const lt=ve(Ye,[["__scopeId","data-v-e7145531"]]);export{lt as default};
