import{d as Y,u as Z,s as ee,a as te,r,o as se,b as ne,c as p,w as s,e as le,A as oe,H as ae,E as y,f as u,g as n,h as g,i as l,j as o,t as _,T as ie,F as re,k as ue,l as f,W as ce,m as de,n as pe,p as _e,q as $,_ as ve}from"./index-d4c5f6c0.js";import{q as me,i as ge,a as fe,b as he,c as Ce}from"./relic_axi-52e6749d.js";import"./WeaponImage.vue_vue_type_script_setup_true_lang-64bded63.js";import"./systems-5ba34008.js";const we={key:0,class:"qp-container"},ke={class:"qp-relics-actions"},$e={class:"qp-relics-actions-extra"},qe=["textContent"],xe={class:"qp-relics-actions-era"},ye=["textContent"],be=["textContent"],Re=["textContent"],Ee=["textContent"],Le=["textContent"],ze=["onClick"],Ae={class:"qp-relics-item-wrapper"},De={class:"qp-relics-image"},Ve={class:"qp-relics-name"},Ne=["textContent"],Ue={key:0,class:"qp-relics-components-count"},We=["textContent"],Me={class:"qp-relics-rarities"},Se={key:0,class:"qp-relics-rarities-gold"},Te={key:1,class:"qp-relics-rarities-silver"},Be={key:2,class:"qp-relics-rarities-bronze"},He=["textContent"],Ie=Y({__name:"HomeView",setup(je){const{t:b}=Z(),M=le(),S=ee(),{rat:R,lang:T,slug:B}=te(S),h=r(!1),c=r(!1),q=r(null),C=r(!1),m=r(null),H=r([]),E=r([]),L=r(1),z=r(1),A=r(0),D=r(null),V=r(window.innerWidth),v=async(i,t,x=!0)=>{x?c.value=!0:h.value=!0,q.value=null;let w=i?`?page=${i}`:"?page=1";w+=t?`&era=${t}`:"",D.value=t;try{let a=await fetch(`${oe}/me/relics/${w}`,{method:"GET",headers:ae(R.value,T.value)}).then(d=>d).catch(()=>new Response(null,{status:400}));if(a.status===200){let d=await a.json();z.value=d.size,A.value=d.count,H.value=d.results,E.value=d.results,h.value=!1,c.value=!1}else throw a.status}catch(a){a===401?y.error("not authorized"):y.error(b("AnErrorOccurred")),q.value=`${a}`,h.value=!1,c.value=!1}},I=(i=null)=>{m.value=i,C.value=!0},N=()=>{C.value=!1,m.value=null},U=()=>{V.value=window.innerWidth},j=()=>{navigator.clipboard.writeText(`${ce}/u/${B.value}`),y.success(b("Sharelinkcopiedtoclipboard"))};return se(()=>{R.value?(v(null,null,!1),window.addEventListener("resize",U)):M.push({name:"AuthLogin"})}),ne(()=>{window.removeEventListener("resize",U)}),(i,t)=>{const x=u("qp-header"),w=u("el-icon"),a=u("el-button"),d=u("el-button-group"),k=u("el-image"),W=u("el-col"),F=u("el-pagination"),G=u("el-row"),O=u("el-drawer"),P=u("qp-notfound"),J=u("qp-loading"),K=u("qp-page"),Q=de("loading");return n(),p(K,null,{default:s(()=>[!h.value&&!q.value?(n(),g("div",we,[l(x,{title:i.$t("Relics"),"page-type":"relics"},null,8,["title"]),o("div",ke,[o("div",$e,[l(d,null,{default:s(()=>[l(a,{onClick:t[0]||(t[0]=e=>j())},{default:s(()=>[l(w,{class:"mdi mdi-share-variant"}),o("span",{textContent:_(i.$t("Share"))},null,8,qe)]),_:1})]),_:1})]),o("div",xe,[l(d,null,{default:s(()=>[l(a,{disabled:c.value,onClick:t[1]||(t[1]=e=>v(null,null,!0))},{default:s(()=>[o("span",{textContent:_(i.$t("All"))},null,8,ye)]),_:1},8,["disabled"]),l(a,{disabled:c.value,onClick:t[2]||(t[2]=e=>v(null,"Lith",!0))},{default:s(()=>[o("span",{textContent:_(i.$t("Lith"))},null,8,be)]),_:1},8,["disabled"]),l(a,{disabled:c.value,onClick:t[3]||(t[3]=e=>v(null,"Meso",!0))},{default:s(()=>[o("span",{textContent:_(i.$t("Meso"))},null,8,Re)]),_:1},8,["disabled"]),l(a,{disabled:c.value,onClick:t[4]||(t[4]=e=>v(null,"Neo",!0))},{default:s(()=>[o("span",{textContent:_(i.$t("Neo"))},null,8,Ee)]),_:1},8,["disabled"]),l(a,{disabled:c.value,onClick:t[5]||(t[5]=e=>v(null,"Axi",!0))},{default:s(()=>[o("span",{textContent:_(i.$t("Axi"))},null,8,Le)]),_:1},8,["disabled"])]),_:1})])]),l(G,{class:"qp-relics-list"},{default:s(()=>[l(ie,{name:"list",mode:"out-in"},{default:s(()=>[(n(!0),g(re,null,ue(E.value,(e,X)=>pe((n(),p(W,{key:`relics-${X}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:s(()=>[o("div",{class:"qp-relics-item",onClick:Fe=>I(e)},[o("div",Ae,[o("div",De,[l(_e,null,{default:s(()=>[e.era=="Lith"?(n(),p(k,{key:0,src:$(ge)},null,8,["src"])):e.era=="Meso"?(n(),p(k,{key:1,src:$(fe)},null,8,["src"])):e.era=="Neo"?(n(),p(k,{key:2,src:$(he)},null,8,["src"])):e.era=="Axi"?(n(),p(k,{key:3,src:$(Ce)},null,8,["src"])):f("",!0)]),_:2},1024)]),o("div",Ve,[o("span",{textContent:_(`${e.era} ${e.name}`)},null,8,Ne)]),e.components.length>1?(n(),g("div",Ue,[o("span",{textContent:_(`x${e.components.length}`)},null,8,We)])):f("",!0),o("div",Me,[e.rarities.gold?(n(),g("span",Se)):f("",!0),e.rarities.silver?(n(),g("span",Te)):f("",!0),e.rarities.bronze?(n(),g("span",Be)):f("",!0)])])],8,ze)]),_:2},1024)),[[Q,c.value]])),128))]),_:1}),l(W,null,{default:s(()=>[l(F,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":L.value,"onUpdate:current-page":t[6]||(t[6]=e=>L.value=e),"page-size":z.value,total:A.value,onCurrentChange:v},null,8,["current-page","page-size","total"])]),_:1})]),_:1}),l(O,{modelValue:C.value,"onUpdate:modelValue":t[8]||(t[8]=e=>C.value=e),direction:"rtl",size:V.value<992?"90%":"30%","before-close":N},{header:s(()=>[m.value?(n(),g("span",{key:0,class:"el-drawer__title",textContent:_(`${m.value.era} ${m.value.name}`)},null,8,He)):f("",!0)]),default:s(()=>[m.value?(n(),p(me,{key:0,relic:m.value,onClose:t[7]||(t[7]=e=>{N(),v(null,D.value,!0)})},null,8,["relic"])):f("",!0)]),_:1},8,["modelValue","size"])])):h.value?(n(),p(J,{key:2})):(n(),p(P,{key:1}))]),_:1})}}});const Ke=ve(Ie,[["__scopeId","data-v-16458d91"]]);export{Ke as default};
