import{d as oe,u as re,s as ie,a as ce,r as c,o as ue,b as de,c as u,w as l,e as pe,A as F,H as I,E as q,f as p,g as e,h as d,i as a,j as s,t as _,k as j,F as G,l as P,T as _e,m as g,W as ve,n as me,p as he,q as k,_ as ge}from"./index-9e0ac4cd.js";import{i as fe,a as we,b as ke,c as Ce}from"./relic_axi-05cc5723.js";import{i as ye,a as qe,b as $e,c as be}from"./systems-5ba34008.js";const xe={key:0,class:"qp-container"},Re={class:"qp-relics-actions"},ze={class:"qp-relics-actions-extra"},Ee=["textContent"],Le={class:"qp-relics-actions-era"},Ae=["textContent"],De=["textContent"],Se=["textContent"],Ve=["textContent"],Ne=["textContent"],Ue=["onClick"],We={class:"qp-relics-item-wrapper"},Oe={class:"qp-relics-image"},Te={class:"qp-relics-name"},Be=["textContent"],Me={key:0,class:"qp-relics-components-count"},He=["textContent"],Fe={class:"qp-relics-rarities"},Ie={key:0,class:"qp-relics-rarities-gold"},je={key:1,class:"qp-relics-rarities-silver"},Ge={key:2,class:"qp-relics-rarities-bronze"},Pe=["textContent"],Je={key:0,class:"qp-relics-drawer-components-list"},Ke=["onClick"],Qe={class:"qp-relics-drawer-components-item-wrapper"},Xe={class:"qp-relics-drawer-components-img"},Ye={class:"qp-relics-drawer-components-name"},Ze=["textContent"],et={class:"qp-relics-drawer-rarities"},tt={key:0,class:"qp-relics-drawer-rarities-gold"},st={key:1,class:"qp-relics-drawer-rarities-silver"},nt={key:2,class:"qp-relics-drawer-rarities-bronze"},lt=oe({__name:"HomeView",setup(at){const{t:b}=re(),J=pe(),K=ie(),{rat:z,lang:L,slug:A}=ce(K),$=c(!1),v=c(!1),x=c(!1),E=c(null),D=c(null),R=c(!1),C=c(null),Q=c([]),S=c([]),V=c(0),N=c(1),U=c(1),W=c(window.innerWidth),f=async(o,n,m=!1)=>{m?v.value=!0:$.value=!0,E.value=null;let y=o?`?page=${o}`:"?page=1";y+=n?`&era=${n}`:"";try{let r=await fetch(`${F}/me/relics/${y}`,{method:"GET",headers:I(z.value,L.value)}).then(h=>h).catch(()=>new Response(null,{status:400}));if(r.status===200){let h=await r.json();V.value=h.count,N.value=h.size,Q.value=h.results,S.value=h.results,$.value=!1,v.value=!1}else throw r.status}catch(r){r===401?q.error("not authorized"):q.error(b("AnErrorOccurred")),E.value=`${r}`,$.value=!1,v.value=!1}},X=(o=null)=>{C.value=o,R.value=!0},O=()=>{R.value=!1,C.value=null},T=()=>{W.value=window.innerWidth},Y=async o=>{x.value=!0,D.value=null;let n=new FormData;n.append("id",o.toString());try{let m=await fetch(`${F}/me/warframes/components/create/`,{method:"POST",body:n,headers:I(z.value,L.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(m.status===201)q.success(b("ComponentUpdated")),x.value=!1,O(),f(null,null);else throw m.status}catch(m){m===401?q.error("not authorized"):q.error(b("AnErrorOccurred")),D.value=`${m}`,x.value=!1}},Z=()=>{console.log(A),navigator.clipboard.writeText(`${ve}/u/${A.value}`),q.success(b("Sharelinkcopiedtoclipboard"))};return ue(()=>{z.value?(f(null,null),window.addEventListener("resize",T)):J.push({name:"AuthLogin"})}),de(()=>{window.removeEventListener("resize",T)}),(o,n)=>{const m=p("qp-header"),y=p("el-icon"),r=p("el-button"),h=p("el-button-group"),w=p("el-image"),B=p("el-col"),ee=p("el-pagination"),te=p("el-row"),se=p("el-drawer"),ne=p("qp-notfound"),le=p("qp-loading"),ae=p("qp-page"),M=me("loading");return e(),u(ae,null,{default:l(()=>[!$.value&&!E.value?(e(),d("div",xe,[a(m,{title:o.$t("Relics"),"page-type":"relics"},null,8,["title"]),s("div",Re,[s("div",ze,[a(h,null,{default:l(()=>[a(r,{onClick:n[0]||(n[0]=t=>Z())},{default:l(()=>[a(y,{class:"mdi mdi-share-variant"}),s("span",{textContent:_(o.$t("Share"))},null,8,Ee)]),_:1})]),_:1})]),s("div",Le,[a(h,null,{default:l(()=>[a(r,{disabled:v.value,onClick:n[1]||(n[1]=t=>f(null,null,!0))},{default:l(()=>[s("span",{textContent:_(o.$t("All"))},null,8,Ae)]),_:1},8,["disabled"]),a(r,{disabled:v.value,onClick:n[2]||(n[2]=t=>f(null,"Lith",!0))},{default:l(()=>[s("span",{textContent:_(o.$t("Lith"))},null,8,De)]),_:1},8,["disabled"]),a(r,{disabled:v.value,onClick:n[3]||(n[3]=t=>f(null,"Meso",!0))},{default:l(()=>[s("span",{textContent:_(o.$t("Meso"))},null,8,Se)]),_:1},8,["disabled"]),a(r,{disabled:v.value,onClick:n[4]||(n[4]=t=>f(null,"Neo",!0))},{default:l(()=>[s("span",{textContent:_(o.$t("Neo"))},null,8,Ve)]),_:1},8,["disabled"]),a(r,{disabled:v.value,onClick:n[5]||(n[5]=t=>f(null,"Axi",!0))},{default:l(()=>[s("span",{textContent:_(o.$t("Axi"))},null,8,Ne)]),_:1},8,["disabled"])]),_:1})])]),j((e(),u(te,{class:"qp-relics-list"},{default:l(()=>[a(_e,{name:"list",mode:"out-in"},{default:l(()=>[(e(!0),d(G,null,P(S.value,(t,i)=>(e(),u(B,{key:`relics-${i}`,span:12,sm:8,md:6,lg:4,class:"qp-relics-col"},{default:l(()=>[s("div",{class:"qp-relics-item",onClick:H=>X(t)},[s("div",We,[s("div",Oe,[a(he,null,{default:l(()=>[t.era=="Lith"?(e(),u(w,{key:0,src:k(fe)},null,8,["src"])):t.era=="Meso"?(e(),u(w,{key:1,src:k(we)},null,8,["src"])):t.era=="Neo"?(e(),u(w,{key:2,src:k(ke)},null,8,["src"])):t.era=="Axi"?(e(),u(w,{key:3,src:k(Ce)},null,8,["src"])):g("",!0)]),_:2},1024)]),s("div",Te,[s("span",{textContent:_(`${t.era} ${t.name}`)},null,8,Be)]),t.components.length>1?(e(),d("div",Me,[s("span",{textContent:_(`x${t.components.length}`)},null,8,He)])):g("",!0),s("div",Fe,[t.rarities.gold?(e(),d("span",Ie)):g("",!0),t.rarities.silver?(e(),d("span",je)):g("",!0),t.rarities.bronze?(e(),d("span",Ge)):g("",!0)])])],8,Ue)]),_:2},1024))),128))]),_:1}),a(B,null,{default:l(()=>[a(ee,{background:"","hide-on-single-page":"",layout:"prev, pager, next","current-page":U.value,"onUpdate:current-page":n[6]||(n[6]=t=>U.value=t),"page-size":N.value,total:V.value,onCurrentChange:f},null,8,["current-page","page-size","total"])]),_:1})]),_:1})),[[M,v.value]]),a(se,{modelValue:R.value,"onUpdate:modelValue":n[7]||(n[7]=t=>R.value=t),direction:"rtl",size:W.value<992?"90%":"30%","before-close":O},{header:l(()=>[C.value?(e(),d("span",{key:0,class:"el-drawer__title",textContent:_(`${C.value.era} ${C.value.name}`)},null,8,Pe)):g("",!0)]),default:l(()=>{var t;return[s("div",null,[(t=C.value)!=null&&t.components?j((e(),d("ul",Je,[(e(!0),d(G,null,P(C.value.components,(i,H)=>(e(),d("li",{key:`warframe-components-${H}`,class:"qp-relics-drawer-components-item",onClick:ot=>i.type=="warframe"?Y(i.id):""},[s("div",Qe,[s("div",Xe,[i.component=="blueprint"?(e(),u(w,{key:0,src:k(ye)},null,8,["src"])):i.component=="chassis"?(e(),u(w,{key:1,src:k(qe)},null,8,["src"])):i.component=="neuroptics"?(e(),u(w,{key:2,src:k($e)},null,8,["src"])):i.component=="systems"?(e(),u(w,{key:3,src:k(be)},null,8,["src"])):g("",!0)]),s("div",null,[s("div",Ye,[s("span",{textContent:_(i.name)},null,8,Ze)]),s("div",et,[i.percent<10?(e(),d("span",tt)):i.percent>9&&i.percent<20?(e(),d("span",st)):i.percent>19?(e(),d("span",nt)):g("",!0)])])])],8,Ke))),128))])),[[M,x.value]]):g("",!0)])]}),_:1},8,["modelValue","size"])])):$.value?(e(),u(le,{key:2})):(e(),u(ne,{key:1}))]),_:1})}}});const ut=ge(lt,[["__scopeId","data-v-1c44dab6"]]);export{ut as default};
