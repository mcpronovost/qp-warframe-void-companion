import{d as V,u as H,s as P,a as G,r as g,o as J,g as e,h as s,i as k,j as a,w as v,c as d,t as f,k as K,F as C,l as q,L as Q,A as O,H as R,E as m,f as p,n as X,v as Y,M as Z,q as D,m as ee,_ as te}from"./index-a1b3c409.js";import{i as se}from"./blueprint-b6c1ffa1.js";import{i as ae,a as ne,b as oe}from"./systems-8cdc0256.js";const re={key:0,class:"qp-container"},le={class:"qp-warframes-actions"},ie={class:"qp-warframes-actions-extra"},ce=["textContent"],ue=["textContent"],de={class:"qp-warframes-detail-components-list"},me=["onClick"],pe={class:"qp-warframes-detail-components-item-wrapper"},_e={class:"qp-warframes-detail-components-img"},fe={class:"qp-warframe-detail-components-name"},ve=["textContent"],he={class:"qp-warframe-detail-components-relics"},we={key:0},ye={key:1,class:"qp-warframe-detail-components-era"},ge=["textContent"],ke={key:0},Ce={key:1,class:"qp-warframe-detail-components-era"},qe=["textContent"],$e={key:0},xe={key:1,class:"qp-warframe-detail-components-era"},Ee=["textContent"],De={key:0},be={key:1,class:"qp-warframe-detail-components-era"},Ae=["textContent"],Se={class:"qp-warframes-detail-image"},Le=V({__name:"WarframesDetail",setup(Oe){const{t:h}=H(),z=Y(),F=P(),{rat:b,lang:A,id:Re}=G(F),w=g(!1),_=g(!1),S=g(null),$=g(null),c=g(),L=async(l=!1)=>{l||(w.value=!0),S.value=null;try{let n=await fetch(`${O}/warframes/${z.params.pk}/`,{method:"GET",headers:R(b.value,A.value)}).then(o=>o).catch(()=>new Response(null,{status:400}));if(n.status===200){let o=await n.json();c.value=o,w.value=!1}else throw n.status}catch(n){n===401?m.error("not authorized"):m.error(h("AnErrorOccurred")),S.value=`${n}`,w.value=!1}},W=async(l,n=!1)=>{_.value=!0,$.value=null;let o=new FormData;c.value&&n?o.append("id",c.value.components.map(t=>t.id.toString()).join(",")):o.append("id",l.toString());try{let t=await fetch(`${O}/me/warframes/components/create/`,{method:"POST",body:o,headers:R(b.value,A.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(t.status===201)m.success(h("ComponentUpdated")),_.value=!1,L(!0);else throw t.status}catch(t){t===401?m.error("not authorized"):m.error(h("AnErrorOccurred")),$.value=`${t}`,_.value=!1}},B=async(l,n=!1)=>{_.value=!0,$.value=null;let o=new FormData;c.value&&n&&o.append("ids",c.value.components.map(t=>t.id.toString()).join(","));try{let t=await fetch(`${O}/me/warframes/components/${l}/delete/`,{method:"DELETE",body:o,headers:R(b.value,A.value)}).then(y=>y).catch(()=>new Response(null,{status:400}));if(t.status===204)m.success(h("ComponentUpdated")),_.value=!1,L(!0);else throw t.status}catch(t){t===401?m.error("not authorized"):m.error(h("AnErrorOccurred")),$.value=`${t}`,_.value=!1}},x=(l,n)=>{let o=l.filter(t=>t.era==n);return o!=null&&o.length?o:[]};return J(()=>{L()}),(l,n)=>{const o=p("qp-header"),t=p("el-button"),y=p("el-button-group"),E=p("el-image"),N=p("el-col"),M=p("el-row"),U=p("qp-notfound"),j=p("qp-loading"),T=X("loading");return!w.value&&!S.value&&c.value?(e(),s("div",re,[k(o,{title:c.value.name,"page-type":"warframe"},null,8,["title"]),a("div",le,[a("div",ie,[k(y,null,{default:v(()=>[c.value.completion<100?(e(),d(t,{key:0,onClick:n[0]||(n[0]=r=>W(0,!0))},{default:v(()=>[a("span",{textContent:f(l.$t("CompleteAll"))},null,8,ce)]),_:1})):(e(),d(t,{key:1,onClick:n[1]||(n[1]=r=>B(0,!0))},{default:v(()=>[a("span",{textContent:f(l.$t("RemoveAll"))},null,8,ue)]),_:1}))]),_:1})])]),k(M,{class:"qp-warframes-detail"},{default:v(()=>[k(N,{span:24,md:14,class:"qp-warframes-detail-info"},{default:v(()=>[K((e(),s("ul",de,[(e(!0),s(C,null,q(c.value.components,(r,I)=>(e(),s("li",{key:`warframe-components-${I}`,class:Z(`qp-warframes-detail-components-item${r.is_owned?" qp-isowned":""}`),onClick:u=>r.is_owned?B(r.id):W(r.id)},[a("div",pe,[a("div",_e,[r.name=="blueprint"?(e(),d(E,{key:0,src:D(se)},null,8,["src"])):r.name=="chassis"?(e(),d(E,{key:1,src:D(ae)},null,8,["src"])):r.name=="neuroptics"?(e(),d(E,{key:2,src:D(ne)},null,8,["src"])):r.name=="systems"?(e(),d(E,{key:3,src:D(oe)},null,8,["src"])):ee("",!0)]),a("div",null,[a("div",fe,[a("span",{textContent:f(l.$t(r.name))},null,8,ve)]),a("div",he,[a("div",null,[(e(!0),s(C,null,q(x(r.relics,"Lith"),(u,i)=>(e(),s("span",{key:`component-relics-${i}`},[i>0?(e(),s("span",we,", ")):(e(),s("span",ye,"Lith : ")),a("span",{textContent:f(u.name)},null,8,ge)]))),128))]),a("div",null,[(e(!0),s(C,null,q(x(r.relics,"Meso"),(u,i)=>(e(),s("span",{key:`component-relics-${i}`},[i>0?(e(),s("span",ke,", ")):(e(),s("span",Ce,"Meso : ")),a("span",{textContent:f(u.name)},null,8,qe)]))),128))]),a("div",null,[(e(!0),s(C,null,q(x(r.relics,"Neo"),(u,i)=>(e(),s("span",{key:`component-relics-${i}`},[i>0?(e(),s("span",$e,", ")):(e(),s("span",xe,"Neo : ")),a("span",{textContent:f(u.name)},null,8,Ee)]))),128))]),a("div",null,[(e(!0),s(C,null,q(x(r.relics,"Axi"),(u,i)=>(e(),s("span",{key:`component-relics-${i}`},[i>0?(e(),s("span",De,", ")):(e(),s("span",be,"Axi : ")),a("span",{textContent:f(u.name)},null,8,Ae)]))),128))])])])])],10,me))),128))])),[[T,_.value]])]),_:1}),k(N,{span:24,md:10,class:"qp-warframes-detail-picture"},{default:v(()=>[a("div",Se,[a("div",{class:"qp-warframes-detail-img",style:Q(`background-image:url('https://raw.githubusercontent.com/WFCD/warframe-items/master/data/img/${c.value.image_name}')`)},null,4)])]),_:1})]),_:1})])):w.value?(e(),d(j,{key:2})):(e(),d(U,{key:1}))}}});const ze=te(Le,[["__scopeId","data-v-2942d393"]]);export{ze as default};
