import{d as H,u as I,s as V,a as G,r as C,o as J,g as e,h as n,i as q,j as a,w,c as r,t as f,k as K,F as $,l as x,L as Q,A as B,H as R,E as m,f as v,n as X,v as Y,M as Z,q as d,m as ee,_ as te}from"./index-a1b3c409.js";import{i as se}from"./blueprint-b6c1ffa1.js";import{i as ne,a as ae,b as oe,c as le,d as re,e as ie,f as ce,g as ue,h as pe}from"./prime_upperlimb-e05cfcd9.js";const de={key:0,class:"qp-container"},_e={class:"qp-weapons-actions"},me={class:"qp-weapons-actions-extra"},ve=["textContent"],he=["textContent"],fe={class:"qp-weapons-detail-components-list"},we=["onClick"],ye={class:"qp-weapons-detail-components-item-wrapper"},ge={class:"qp-weapons-detail-components-img"},ke={class:"qp-weapons-detail-components-name"},Ce=["textContent"],qe={class:"qp-weapons-detail-components-relics"},$e={key:0},xe={key:1,class:"qp-weapons-detail-components-era"},be=["textContent"],Ee={key:0},De={key:1,class:"qp-weapons-detail-components-era"},Ae=["textContent"],Le={key:0},Se={key:1,class:"qp-weapons-detail-components-era"},Be=["textContent"],Re={key:0},Oe={key:1,class:"qp-weapons-detail-components-era"},We=["textContent"],Ue={class:"qp-weapons-detail-image"},ze=H({__name:"PrimaryWeaponsDetail",setup(Fe){const{t:y}=I(),z=Y(),F=V(),{rat:D,lang:A,id:Me}=G(F),g=C(!1),h=C(!1),L=C(null),b=C(null),u=C(),S=async(i=!1)=>{i||(g.value=!0),L.value=null;try{let o=await fetch(`${B}/primary-weapons/${z.params.pk}/`,{method:"GET",headers:R(D.value,A.value)}).then(l=>l).catch(()=>new Response(null,{status:400}));if(o.status===200){let l=await o.json();u.value=l,g.value=!1}else throw o.status}catch(o){o===401?m.error("not authorized"):m.error(y("AnErrorOccurred")),L.value=`${o}`,g.value=!1}},O=async(i,o=!1)=>{h.value=!0,b.value=null;let l=new FormData;u.value&&o?l.append("id",u.value.components.map(s=>s.id.toString()).join(",")):l.append("id",i.toString());try{let s=await fetch(`${B}/me/primary-weapons/components/create/`,{method:"POST",body:l,headers:R(D.value,A.value)}).then(k=>k).catch(()=>new Response(null,{status:400}));if(s.status===201)m.success(y("ComponentUpdated")),h.value=!1,S(!0);else throw s.status}catch(s){s===401?m.error("not authorized"):m.error(y("AnErrorOccurred")),b.value=`${s}`,h.value=!1}},W=async(i,o=!1)=>{h.value=!0,b.value=null;let l=new FormData;u.value&&o&&l.append("ids",u.value.components.map(s=>s.id.toString()).join(","));try{let s=await fetch(`${B}/me/primary-weapons/components/${i}/delete/`,{method:"DELETE",body:l,headers:R(D.value,A.value)}).then(k=>k).catch(()=>new Response(null,{status:400}));if(s.status===204)m.success(y("ComponentUpdated")),h.value=!1,S(!0);else throw s.status}catch(s){s===401?m.error("not authorized"):m.error(y("AnErrorOccurred")),b.value=`${s}`,h.value=!1}},E=(i,o)=>{let l=i.filter(s=>s.era==o);return l!=null&&l.length?l:[]};return J(()=>{S()}),(i,o)=>{const l=v("qp-header"),s=v("el-button"),k=v("el-button-group"),p=v("el-image"),U=v("el-col"),M=v("el-row"),N=v("qp-notfound"),P=v("qp-loading"),j=X("loading");return!g.value&&!L.value&&u.value?(e(),n("div",de,[q(l,{title:u.value.name,"page-type":"weapon"},null,8,["title"]),a("div",_e,[a("div",me,[q(k,null,{default:w(()=>[u.value.completion<100?(e(),r(s,{key:0,onClick:o[0]||(o[0]=t=>O(0,!0))},{default:w(()=>[a("span",{textContent:f(i.$t("CompleteAll"))},null,8,ve)]),_:1})):(e(),r(s,{key:1,onClick:o[1]||(o[1]=t=>W(0,!0))},{default:w(()=>[a("span",{textContent:f(i.$t("RemoveAll"))},null,8,he)]),_:1}))]),_:1})])]),q(M,{class:"qp-weapons-detail"},{default:w(()=>[q(U,{span:24,md:14,class:"qp-weapons-detail-info"},{default:w(()=>[K((e(),n("ul",fe,[(e(!0),n($,null,x(u.value.components,(t,T)=>(e(),n("li",{key:`weapon-components-${T}`,class:Z(`qp-weapons-detail-components-item${t.is_owned?" qp-isowned":""}`),onClick:_=>t.is_owned?W(t.id):O(t.id)},[a("div",ye,[a("div",ge,[t.name=="blueprint"?(e(),r(p,{key:0,src:d(se)},null,8,["src"])):t.name=="barrel"?(e(),r(p,{key:1,src:d(ne)},null,8,["src"])):t.name=="blade"?(e(),r(p,{key:2,src:d(ae)},null,8,["src"])):t.name=="grip"?(e(),r(p,{key:3,src:d(oe)},null,8,["src"])):t.name=="handle"?(e(),r(p,{key:4,src:d(le)},null,8,["src"])):t.name=="lowerlimb"?(e(),r(p,{key:5,src:d(re)},null,8,["src"])):t.name=="receiver"?(e(),r(p,{key:6,src:d(ie)},null,8,["src"])):t.name=="stock"?(e(),r(p,{key:7,src:d(ce)},null,8,["src"])):t.name=="string"?(e(),r(p,{key:8,src:d(ue)},null,8,["src"])):t.name=="upperlimb"?(e(),r(p,{key:9,src:d(pe)},null,8,["src"])):ee("",!0)]),a("div",null,[a("div",ke,[a("span",{textContent:f(i.$t(t.name))},null,8,Ce)]),a("div",qe,[a("div",null,[(e(!0),n($,null,x(E(t.relics,"Lith"),(_,c)=>(e(),n("span",{key:`component-relics-${c}`},[c>0?(e(),n("span",$e,", ")):(e(),n("span",xe,"Lith : ")),a("span",{textContent:f(_.name)},null,8,be)]))),128))]),a("div",null,[(e(!0),n($,null,x(E(t.relics,"Meso"),(_,c)=>(e(),n("span",{key:`component-relics-${c}`},[c>0?(e(),n("span",Ee,", ")):(e(),n("span",De,"Meso : ")),a("span",{textContent:f(_.name)},null,8,Ae)]))),128))]),a("div",null,[(e(!0),n($,null,x(E(t.relics,"Neo"),(_,c)=>(e(),n("span",{key:`component-relics-${c}`},[c>0?(e(),n("span",Le,", ")):(e(),n("span",Se,"Neo : ")),a("span",{textContent:f(_.name)},null,8,Be)]))),128))]),a("div",null,[(e(!0),n($,null,x(E(t.relics,"Axi"),(_,c)=>(e(),n("span",{key:`component-relics-${c}`},[c>0?(e(),n("span",Re,", ")):(e(),n("span",Oe,"Axi : ")),a("span",{textContent:f(_.name)},null,8,We)]))),128))])])])])],10,we))),128))])),[[j,h.value]])]),_:1}),q(U,{span:24,md:10,class:"qp-weapons-detail-picture"},{default:w(()=>[a("div",Ue,[a("div",{class:"qp-weapons-detail-img",style:Q(`background-image:url('https://raw.githubusercontent.com/WFCD/warframe-items/master/data/img/${u.value.image_name}')`)},null,4)])]),_:1})]),_:1})])):g.value?(e(),r(P,{key:2})):(e(),r(N,{key:1}))}}});const Te=te(ze,[["__scopeId","data-v-fce6637c"]]);export{Te as default};
